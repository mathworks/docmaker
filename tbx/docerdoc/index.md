# Doc_er :hippopotamus:

Doc_er is a tool for generating MATLAB toolbox documentation.

With Doc_er, you can:
* write documentation in [Markdown](https://commonmark.org/help/) and convert to HTML for viewing in MATLAB
* run MATLAB code blocks in documents and include textual and graphical output
* create MATLAB documentation index files from a Markdown table of contents

This is Doc_er version 0.2.  The [release notes](changelog.md) detail new features, bug fixes, and compatibility considerations for each version.

## Getting started

### System requirements

Doc_er requires [MATLAB](https://www.mathworks.com/support/requirements/matlab-system-requirements.html) R2021a or later to *generate* documentation.

[`docerconvert`](docerconvert.md) and [`docerindex`](docerindex.md) require internet access to [api.github.com](https://docs.github.com/en/rest) to process your Markdown files and generate Doc_er artifacts.  See the [GitHub API terms of service](https://docs.github.com/en/site-policy/github-terms/github-terms-of-service#h-api-terms) and [privacy statement](https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement) for further information.

Documentation generated by Doc_er can be *viewed* in *much older* releases of MATLAB, and offline.

### Installation

Doc_er is distributed as a MATLAB toolbox file (`.mltbx`).  See the MATLAB documentation for [instructions](https://www.mathworks.com/help/matlab/matlab_prog/create-and-share-custom-matlab-toolboxes.html) on installing and uninstalling toolboxes.

Doc_er uses the [GitHub Markdown API](https://docs.github.com/en/rest/markdown) to convert from Markdown to HTML.  Requests to this service are rate limited, and [authenticated requests](https://docs.github.com/en/rest/authentication/authenticating-to-the-rest-api) get a higher limit.  To authenticate, [generate a GitHub access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) (with no permissions), and register the token with MATLAB using [`setSecret("GitHub API token")`](https://www.mathworks.com/help/matlab/ref/setsecret.html) or [`setpref("docer","token",t)`](https://www.mathworks.com/help/matlab/ref/setpref.html).

## Working with Doc_er

### Write documentation

Write documentation in Markdown using your favorite editor.  Include code, images, and links.  Indicate MATLAB code blocks with ` ```matlab `.  You can use the Doc_er documentation as inspiration for your own documentation.

Write a table of contents called `helptoc.md`, also in Markdown.  This document should contain:
* a level-1 heading `# Heading` with the name of the toolbox
* a nested list of links to your Markdown documents

For example:

```md
# Ducks Toolbox

* [Getting started](index.md)
  * [Huey](huey.md)
  * [Louie](louie.md)
  * [Dewey](dewey.md)
```

If you need a list item to group child items, specify an empty link URL, e.g. `* [Function reference]()`.  Other content in `helptoc.md` -- including additional links and normal text in list items -- is ignored by but harmless to [`docerindex`](docerindex.md).

### Publish documentation

First, use [`docerconvert`](docerconvert.md) to convert your Markdown documents to HTML.  Next, use [`docerrun`](docerrun.md) to run your MATLAB scripts and capture output as images.  Finally, use [`docerindex`](docerindex.md) to generate documentation index files.  Here is a complete example, to generate the Doc_er documentation:

```matlab
docerconvert tbx/docerdoc/**/*.md
docerrun tbx/docerdoc/**/*.html
docerindex tbx/docerdoc 
```

Before you start, you may wish to delete previous Doc_er artifacts using [`docerdelete`](docerdelete.md).

### Automate DevOps

You should commit your source files (`.md`, `.m`), but not the Doc_er generated files (`.html`, `.xml`), to source control.  An example `.gitignore` snippet, from Doc_er, is:

```
tbx/docerdoc/**/*.html
tbx/docerdoc/**/*.png
tbx/docerdoc/info.xml
tbx/docerdoc/helptoc.xml
tbx/docerdoc/custom_toolbox.json
tbx/docerdoc/resources
tbx/docerdoc/helpsearch-v*
```

You should package the generated files, and optionally the source files, for distribution.

From R2022b, you may wish to automate these steps using the [MATLAB Build Tool](https://www.mathworks.com/help/matlab/matlab_prog/overview-of-matlab-build-tool.html).

## Support

Doc_er is not an official MathWorks product, but support is provided by the [author](https://www.mathworks.com/matlabcentral/profile/authors/16247) and his colleagues on a *best efforts* basis.  Please get in touch by [email](mailto:dsampson@mathworks.com) if you have problems, suggestions, or other comments.  MathWorks staff can raise issues directly in [GitLab](https://insidelabs-git.mathworks.com/dsampson/docer).

## See also

[home](index.md) :house: | [convert](docerconvert.md) :arrow_right: | [run](docerrun.md) :runner: | [index](docerindex.md) :scroll: | [delete](docerdelete.md) :recycle: | [workspace](workspace.md) :construction_worker: | [about](about.md) :hippopotamus: | :copyright: [MathWorks](https://www.mathworks.com/services/consulting.html) 2024