# Doc'er :hippopotamus:

Doc'er is a tool for generating MATLAB toolbox documentation.

With Doc'er, you can:
* write documentation in [Markdown](https://commonmark.org/help/) and convert to HTML for viewing in MATLAB
* run MATLAB scripts and capture output as images for inclusion in documentation
* create MATLAB documentation index files from a Markdown table of contents

## Getting started

### System requirements

Doc'er requires [MATLAB](https://uk.mathworks.com/support/requirements/matlab-system-requirements.html) R2021a or later to *generate* documentation.  (Doc'er makes heavy use of the [MATLAB API for XML processing](https://uk.mathworks.com/help/matlab/xml-documents.html) that was introduced in that release.)

[`docerconvert`](docerconvert.md) and [`docerindex`](docerindex.md) require internet access to [api.github.com](https://docs.github.com/en/rest) to generate Doc'er artifacts.

Documentation generated by Doc'er can be *viewed* in *much older* releases of MATLAB, and offline.

### Installation

Doc'er is distributed as a MATLAB toolbox file (`.mltbx`).  See the MATLAB documentation for [instructions](https://uk.mathworks.com/help/matlab/matlab_prog/create-and-share-custom-matlab-toolboxes.html) on installing and uninstalling toolboxes.

Doc'er uses the [GitHub Markdown API](https://docs.github.com/en/rest/markdown) to convert from Markdown to HTML.  Requests to this service are rate limited, and [authenticated requests](https://docs.github.com/en/rest/authentication/authenticating-to-the-rest-api) get a higher limit.  To authenticate, [generate a GitHub access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) (with no permissions), and register the token with MATLAB using [`setSecret("GitHub API token")`](https://uk.mathworks.com/help/matlab/ref/setsecret.html) or [`setpref("docer","token",t)`](https://uk.mathworks.com/help/matlab/ref/setpref.html).

## Working with Doc'er

### Write documentation

Write documentation in Markdown using your favorite editor (e.g., [Visual Studio Code](https://code.visualstudio.com/)).  Your Markdown documents can include internal and external links and images.  You can use the Doc'er documentation as inspiration for your own documentation.

Write a table of contents called `helptoc.md`, also in Markdown.  The table of contents should include a level-1 heading with the toolbox name, and a structured list of links to the Markdown documents.  For example:

```md
# My Toolbox

* [My Toolbox](index.md)
  * [foo](foo.md) - do this
  * [bar](bar.md) - do that
```

You can include whatever you want in `helptoc.md`, but only the heading and the list contents will appear in the MATLAB help browser sidebar.

### Publish documentation

Before you start, you may wish to delete previous Doc'er artifacts using [`docerdelete`](docerdelete.md).

First, use [`docerconvert`](docerconvert.md) to convert your Markdown documents to HTML.  Next, use [`docerrun`](docerrun.md) to run your MATLAB scripts and capture output as images.  Finally, use [`docerindex`](docerindex.md) to generate documentation index files.  Here is a complete example:

```matlab
docerconvert tbx/docerdoc/**/*.md
docerrun tbx/docerdoc/**/*.m
docerindex tbx/docerdoc
```

### Automate DevOps

You should commit your source files (`.md`, `.m`), but not the Doc'er generated files (`.html`, `.xml`), to source control.  An example `.gitignore` snippet is:

```
tbx/docerdoc/**/*.html
tbx/docerdoc/**/*.png
tbx/docerdoc/info.xml
tbx/docerdoc/helptoc.xml
tbx/docerdoc/custom_toolbox.json
tbx/docerdoc/resources
tbx/docerdoc/helpsearch-v*
```

You should package the generated files, and optionally the source files, for distribution.

From R2022b, you may wish to automate these steps using the [MATLAB Build Tool](https://uk.mathworks.com/help/matlab/matlab_prog/overview-of-matlab-build-tool.html).

## Support

Doc'er is not a MathWorks supported product, but support is provided by the [author](https://uk.mathworks.com/matlabcentral/profile/authors/16247) and his colleagues on a *best efforts* basis, so please get in touch if you have problems, suggestions, or other comments.  MathWorks staff can raise issues directly in [GitLab](https://insidelabs-git.mathworks.com/dsampson/docer).

## See also

[:house:](index.md) | [convert](docerconvert.md) :arrow_right: | [run](docerrun.md) :runner: | [index](docerindex.md) :scroll: | [delete](docerdelete.md) :recycle: | [about](about.md) :hippopotamus: