# docerconvert :arrow_right:

Convert Markdown documents to HTML

## Syntax

`docerconvert(md)` converts the Markdown document(s) `md` to HTML.

Multiple documents may also be specified using `docerconvert(md1,md2,...)`.

`docerconvert(...,"Stylesheets",css)` includes the stylesheet(s) `css`.  Doc_er stylesheets `github-markdown.css` and `matlaby.css` are always included.

`docerconvert(...,"Scripts",js)` includes the script(s) `js`. :test_tube:

`docerconvert(...,"Root",r)` publishes to the root folder `r`, placing stylesheets and scripts in the subfolder `resources`.The root folder must be a common ancestor of the Markdown documents.  If not specified, the root folder is the lowest common ancestor.

`files = docerconvert(...)` returns the names of the files created.

| Name | Description | Type | Required |
| :-: | --- | :-: | :-: |
| `md`:arrow_right: | Markdown document(s), as an absolute or relative path; wildcards are [supported](https://www.mathworks.com/help/matlab/ref/dir.html#bsnswnx-1-name) | string(s) | yes |
| `css`:arrow_right: | CSS stylesheet(s), as an absolute or relative path; wildcards are [supported](https://www.mathworks.com/help/matlab/ref/dir.html#bsnswnx-1-name) | string(s) | |
| `js`:arrow_right: | JavaScript script(s), as an absolute or relative path; wildcards are [supported](https://www.mathworks.com/help/matlab/ref/dir.html#bsnswnx-1-name) | string(s) | :test_tube: |
| `d`:arrow_right: | root folder, as an absolute or relative path; default is the lowest common ancestor of `md` | string | |
| :arrow_right:`files` | HTML document(s) created, as an absolute path | string(s) | |

## Examples

```matlab
docerconvert("mickey/pluto.md") 
```
converts a single Markdown document `mickey/pluto.md` to HTML.  Note that this path is *relative*.

```matlab
docerconvert("C:\daisy\mickey\pluto.md") 
```
also converts a single Markdown document, this time specified using an *absolute* path.

```matlab
docerconvert("mickey/*.md") 
```
converts *all* Markdown documents in `mickey` to HTML.

```matlab
docerconvert("mickey/**/*.md") 
```
converts all Markdown documents in `mickey` *and its subfolders*.

```matlab
docerconvert(["mickey/pluto.md" "mickey/donald.md"]) 
```
converts *multiple* Markdown documents to HTML.

```matlab
docerconvert("mickey/pluto.md","Stylesheets","huey/louie.css") 
```
copies the stylesheet `huey/louie.css` to the `resources` folder and includes a `<link>` in the HTML `<head>`.

```matlab
docerconvert("mickey/pluto.md","Scripts","morty/ferdie.js") 
```
copies the script `morty/ferdie.js` to the `resources` folder and includes a `<script>` in the HTML `<head>`. :test_tube:

```matlab
docerconvert("mickey/goofy/*.md","Root","mickey") 
```
sets the root folder to `mickey`, rather than the lowest common ancestor `mickey/goofy` of the Markdown documents.

## Details

### Steps

The conversion consists of 7 steps:
1. Read the Markdown file
2. Convert Markdown to an HTML fragment using the [GitHub Markdown API](https://docs.github.com/en/rest/markdown) service
3. Tidy up the HTML fragment in preparation for XML postprocessing
4. Replace `.md` links in the fragment to `.html` -- Markdown links to Markdown, HTML links to HTML
5. Build an HTML document around the HTML fragment
   * including default stylesheets, specified stylesheets, and specified scripts
   * using the first level-1 heading `# Heading` as the `<html>` `<title>`
6. Copy the specified stylesheets and scripts to the `resources` folder in the root folder
7. Write the document to an HTML file next to the original Markdown file

### Styling

Doc_er seeks to provide pleasant style by default, but you can override the default styles by specifying your own stylesheets.

For example, to make level-2 headings `## Heading` blue, create and specify a stylesheet with:
```css
h2 {
  color: blue;
}
```

Since cascading stylesheets [*cascade*](https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade), later styles override earlier styles.

### Postprocessing

Generated HTML may be postprocessed in the browser using JavaScript.  To postprocess content, create and specify a JavaScript file with:
```js
document.addEventListener("DOMContentLoaded", function() {
    // your code here
})
```

The script is included using a `<script>` in the `<html>` `<head>` and so is loaded *before* the HTML `<body>` is loaded.  The `DOMContentLoaded` event is suggested because, as explained [here](https://developer.mozilla.org/en-US/docs/Web/API/Document/DOMContentLoaded_event):

> The `DOMContentLoaded` event fires when the HTML document has been completely parsed, and all deferred scripts (`<script defer src="...">` and `<script type="module">`) have downloaded and executed.  It doesn't wait for other things like images, subframes, and async scripts to finish loading.

This feature depends on reverse-engineering the HTML generated by the [GitHub Markdown API](https://docs.github.com/en/rest/markdown) service, although much of the behavior is obvious.

This feature is experimental :test_tube: and may be removed in a future version.

___

[home](index.md) :house: | [convert](docerconvert.md) :arrow_right: | [run](docerrun.md) :runner: | [index](docerindex.md) :scroll: | [delete](docerdelete.md) :recycle: | [workspace](workspace.md) :construction_worker: | [about](about.md) :hippopotamus: | :copyright: [MathWorks](https://www.mathworks.com/services/consulting.html) 2024